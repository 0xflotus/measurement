"use strict";function convertCompoundUnit(t,n,i){void 0==i&&(i=0);var e=t.subUnits.slice(0);if(n.type!=e[i].type)throw new Error("Invalid Units: a unit of type `"+e[i].type+"` cannot be converted to a unit of type `"+n.type+"`");return e[i]=n,new CompoundUnit(e)}var CompoundUnit=require("./compound-units"),UnitTypes=require("./unit-types"),Measurement=function(t,n){this.value=t,this.unit=n};Measurement.prototype.getValue=function(t,n){return"string"==typeof t&&(t=this.units[t]),void 0!==t&&this.unit.type===UnitTypes.COMPOUND&&(t=convertCompoundUnit(this.unit,t,n)),void 0===t&&(t=this.unit),this.value*(this.unit.getMultiplier()/t.getMultiplier())},Measurement.prototype.as=function(t,n){"string"==typeof t&&(t=this.units[t]);var i=this.getValue(t,n);if(this.unit.type==UnitTypes.COMPOUND&&(t=convertCompoundUnit(this.unit,t,n)),t.type!=this.unit.type)throw new Error("Invalid Units: a unit of type `"+this.unit+"` cannot be converted to a unit of type `"+t+"`");return new Measurement(i,t)},Measurement.prototype.to=function(t,n){"string"==typeof t&&(t=this.units[t]);var i=this.as(t,n);return this.value=i.value,this.unit=i.unit,this},Measurement.prototype.per=function(t){if("string"==typeof t&&(t=this.units[t]),this.unit.type!=UnitTypes.COMPOUND){var n=new CompoundUnit;n.addUnit(this.unit),this.unit=n}return this.unit.addUnit(t),this},Measurement.prototype.toString=function(){return this.value+this.unit},module.exports=Measurement;